<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>二營健康管理中心</title>
  <style>
    body {
      font-family: Arial, "Noto Sans TC", sans-serif;
      margin:0; padding:0;
      background: linear-gradient(180deg, #0f5fb6 0%, #2382e0 50%, #e6f1ff 100%);
      color:#222;
    }
    header {
      color:#fff; padding:1rem; text-align:center;
      border-bottom:1px solid rgba(255,255,255,0.3);
      backdrop-filter: blur(6px);
    }
    h1 { margin:0; font-size:1.4rem; }
    #marquee {
      overflow:hidden; white-space:nowrap;
      animation: marquee 30s linear infinite;
      font-weight:bold; margin-top:0.3rem; font-size:0.9rem;
    }
    @keyframes marquee {
      0% { transform:translateX(100%); }
      100% { transform:translateX(-100%); }
    }
    main { text-align:center; padding:1.2rem; }
    .wrap{ max-width:520px; margin:0 auto; padding:0 16px; }
    #bulletin {
      margin:0 auto 1.2rem auto; padding:1rem;
      background:#fff; color:#000;
      border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.12);
      text-align:left;
    }
    #bulletin h2 { margin-top:0; font-size:1.1rem; }
    .btn {
      display:inline-flex; align-items:center; justify-content:center;
      width:100%; margin:0.6rem 0; padding:0.9rem;
      font-size:1rem; font-weight:700;
      border:none; border-radius:12px; cursor:pointer;
      color:#fff; box-sizing:border-box;
      box-shadow:0 2px 6px rgba(0,0,0,0.15);
      transition: filter .2s, transform .1s;
    }
    .btn:hover { filter:brightness(1.04); }
    .btn:active { transform:translateY(1px); }
    .primary { background:#0f6ad8; }
    .secondary { background:#2cb36c; }
    footer {
      text-align:center; padding:0.8rem; margin-top:2rem;
      font-size:0.75rem; color:#444;
    }
    /* Modal */
    .modal { display:none; position:fixed; z-index:100; left:0; top:0;
      width:100%; height:100%; overflow:auto;
      background:rgba(0,0,0,0.55);
      padding: max(12px, env(safe-area-inset-top)) 12px max(12px, env(safe-area-inset-bottom)) 12px;
    }
    .modal-content {
      background:#fff; color:#000;
      margin:0 auto; padding:20px;
      border-radius:16px; width:calc(100% - 24px); max-width:720px;
      max-height:calc(100svh - 48px);
      overflow:auto; -webkit-overflow-scrolling:touch;
      box-shadow:0 4px 16px rgba(0,0,0,0.2);
    }
    .close { color:#333; float:right; font-size:28px; font-weight:bold; cursor:pointer; }
    .close:hover { color:#000; }
    .row-buttons{ display:flex; gap:0.75rem; margin:0.5rem 0; }
    .row-buttons .btn{ flex:1; margin:0; }
  </style>
</head>
<body>
<header>
  <h1>📍 二營健康管理中心</h1>
  <div id="marquee">健康標語載入中...</div>
</header>

<main>
  <div class="wrap">
    <div id="bulletin">
      <h2>今日值班人員</h2>
      <p>少尉鍾俊佑 0938-000-372<br>
         上士李啟祥 0955-797-745</p>
      <small id="dutyWindow" data-auto="1" data-cycle="wed" data-length="7">
        值班時間：114年08月20日 ～ 114年08月27日
      </small>
    </div>

    <button id="bmiBtn" class="btn primary" type="button">BMI 回報</button>
    <button id="menuBtn" class="btn secondary" type="button">今日建議菜單</button>
  </div>
</main>

<!-- 減脂菜單 Modal -->
<div id="menuModal" class="modal">
  <div class="modal-content">
    <span id="closeMenu" class="close">&times;</span>
    <h2>今日建議菜單</h2>
    <div class="row-buttons">
      <button id="randBtn" class="btn primary">抽籤（避免重複）</button>
      <button id="byWeekBtn" class="btn secondary">依星期菜單</button>
    </div>
    <ul id="menuList"></ul>
    <p id="calories"></p>
  </div>
</div>

<footer>
  <p>&copy; 114 二營健康管理中心</p>
</footer>

<script>
// Header 隨機色池
const headerColors = [
  "linear-gradient(135deg, #0f5fb6, #2382e0)",
  "linear-gradient(135deg, #1d976c, #93f9b9)",
  "linear-gradient(135deg, #ff512f, #dd2476)",
  "linear-gradient(135deg, #654ea3, #eaafc8)"
];
document.querySelector("header").style.background =
  headerColors[Math.floor(Math.random() * headerColors.length)];

// 健康標語池
const slogans = [
  "均衡飲食，體能常青","多喝水，少喝含糖飲料","睡眠充足，精神百倍",
  "規律運動，強健體魄","拒菸酒檳榔，健康一生","三餐定時定量，少吃宵夜",
  "控制體重，守護戰力","壓力釋放，心理健康","每週至少運動150分鐘",
  "少油少鹽少糖，多蔬果高纖維"
];
document.getElementById('marquee').textContent =
  slogans[Math.floor(Math.random()*slogans.length)];

// 開啟 BMI 表單
document.getElementById('bmiBtn').addEventListener('click', () => {
  window.open('https://forms.gle/cr3efubbA1WoArfp6','_blank','noopener');
});

// 每日菜單 (範例)
const menus = [
  [
    {meal:"早餐：燕麥＋水煮蛋＋無糖豆漿", kcal:350},
    {meal:"午餐：雞胸肉＋糙米＋燙青菜", kcal:500},
    {meal:"晚餐：蔬菜湯＋豆腐＋水果", kcal:300}
  ],
  [
    {meal:"早餐：全麥吐司＋低脂牛奶", kcal:300},
    {meal:"午餐：鮭魚＋糙米＋青花菜", kcal:550},
    {meal:"晚餐：蒸蛋＋炒菠菜＋水果", kcal:320}
  ]
];
const todayMenu = menus[new Date().getDay() % menus.length];
document.getElementById("menuList").innerHTML =
  todayMenu.map(i => `<li>${i.meal} (${i.kcal} kcal)</li>`).join("");
document.getElementById("calories").textContent =
  "每日總熱量：約 " + todayMenu.reduce((a,b)=>a+b.kcal,0) + " kcal";

// Modal 控制
function setupModal(btnId, modalId, closeId) {
  const btn = document.getElementById(btnId);
  const modal = document.getElementById(modalId);
  const span = document.getElementById(closeId);
  btn.onclick = () => { modal.style.display = "block"; document.body.classList.add("modal-open"); }
  span.onclick = () => { modal.style.display = "none"; document.body.classList.remove("modal-open"); }
  window.addEventListener("click", e => { if (e.target==modal){ modal.style.display="none"; document.body.classList.remove("modal-open"); }});
}
setupModal("menuBtn","menuModal","closeMenu");
</script>
</body>
</html>